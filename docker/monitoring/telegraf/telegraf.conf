[agent]
  interval = "10s"
  round_interval = true
  metric_batch_size = 1000
  metric_buffer_limit = 10000
  collection_jitter = "0s"
  flush_interval = "10s"
  flush_jitter = "0s"
  precision = "0s"
  hostname = ""
  omit_hostname = false

# Output to InfluxDB v2
[[outputs.influxdb_v2]]
  urls = ["http://influxdb:8086"]
  token = "${INFLUXDB_TOKEN}"
  organization = "immich"
  bucket = "immich"

# Input Plugins

# Docker Container Metrics
[[inputs.docker]]
  endpoint = "unix:///var/run/docker.sock"
  gather_services = false
  container_names = []
  source_tag = false
  container_name_include = []
  container_name_exclude = []
  timeout = "5s"
  perdevice = true
  total = false
  docker_label_include = []
  docker_label_exclude = []

# PostgreSQL Metrics
# Note: For production, consider using sslmode=require instead of sslmode=disable
# if your PostgreSQL instance supports SSL/TLS connections
[[inputs.postgresql]]
  address = "host=database user=postgres password=${DB_PASSWORD} sslmode=disable dbname=immich"
  databases = ["immich"]

# Redis Metrics
[[inputs.redis]]
  servers = ["tcp://redis:6379"]

# System Metrics (for temperature monitoring if available)
[[inputs.sensors]]
  # This will try to read temperature sensors if available on the host
  remove_numbers = false
